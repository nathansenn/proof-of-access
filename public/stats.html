<!DOCTYPE html>
<html>
<head>
    <title>Stats Viewer</title>
    <style>
        table {
            width: 100%;
        }
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
    </style>
</head>
<body>
<h1>Database Stats</h1>
<table id="statsTable">
    <tr>
        <th>CID</th>
        <th>Seed</th>
        <th>Status</th>
        <th>Name</th>
    </tr>
</table>

<script>
    const statsTable = document.getElementById('statsTable');

    // Replace with your server WebSocket URL
    const wsUrl = "ws://localhost:8080/get-stats";
    const ws = new WebSocket(wsUrl);

    ws.onmessage = function(event) {
        let data = JSON.parse(event.data);
        if (data.status === "OK") {
            let stats = JSON.parse(data.body);
            stats.forEach(stat => {
                let row = statsTable.insertRow(-1);
                let cidCell = row.insertCell(0);
                let seedCell = row.insertCell(1);
                let statusCell = row.insertCell(2);
                let nameCell = row.insertCell(3);

                cidCell.innerHTML = stat.CID;
                seedCell.innerHTML = stat.seed;
                statusCell.innerHTML = stat.status;
                nameCell.innerHTML = stat.name;
            });
        }
    };

    ws.onerror = function(event) {
        console.error("WebSocket error observed:", event);
    };
</script>
</body>
</html>
